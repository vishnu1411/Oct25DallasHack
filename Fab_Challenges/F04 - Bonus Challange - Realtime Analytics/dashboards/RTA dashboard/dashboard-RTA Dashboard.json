{"$schema":"https://pbiadx.powerbi.com/static/d/schema/51/dashboard.json","id":"eb818e6d-b4a7-4895-a96e-e1b951e6fad8","eTag":"\"61362866e4a44ec8b0dfcbac82ec16b8\"","schema_version":"51","title":"RTA Dashboard","autoRefresh":{"enabled":true,"defaultInterval":"30s"},"tiles":[{"id":"8a1e308f-c005-4b09-b3e8-71edd3ce7885","title":"Clicks by hour","visualType":"area","pageId":"47b3b0b7-040b-42da-8aa5-8ff003ae2646","layout":{"x":15,"y":0,"width":9,"height":5},"queryRef":{"kind":"query","queryId":"0a41b04e-fa32-4e49-8d2c-0fa0a5bfd09e"},"visualOptions":{"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":false,"legendLocation":"bottom","xColumnTitle":"","xColumn":null,"yColumns":null,"seriesColumns":null,"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"26f3f63c-915f-47e4-89d6-af49ac23d935","title":"Impressions by hour","visualType":"area","pageId":"47b3b0b7-040b-42da-8aa5-8ff003ae2646","layout":{"x":15,"y":5,"width":9,"height":5},"queryRef":{"kind":"query","queryId":"963d59cf-662f-484f-a000-41f690458c9c"},"visualOptions":{"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":false,"legendLocation":"bottom","xColumnTitle":"","xColumn":null,"yColumns":null,"seriesColumns":null,"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"86f2540f-a0ef-44b8-bf0f-89be5e686ffa","title":"Impressions by Location","visualType":"map","pageId":"47b3b0b7-040b-42da-8aa5-8ff003ae2646","layout":{"x":0,"y":4,"width":8,"height":18},"queryRef":{"kind":"query","queryId":"f50f71e7-f573-4fa5-b1be-2a164e2fd51e"},"visualOptions":{"map__type":"bubble","map__latitudeColumn":"lat","map__longitudeColumn":"lon","map__labelColumn":null,"map__sizeColumn":null,"map__sizeDisabled":true,"map__geoType":"numeric","map__geoPointColumn":null}},{"id":"a1cd6a72-792f-489a-bc2e-2cbdc113ab6b","title":"Click through rate","visualType":"card","pageId":"47b3b0b7-040b-42da-8aa5-8ff003ae2646","layout":{"x":2,"y":0,"width":5,"height":4},"queryRef":{"kind":"query","queryId":"bb34b622-7bc0-44a6-bf95-8e3dc671c98e"},"visualOptions":{"multiStat__textSize":"auto","multiStat__valueColumn":"CTR","colorRulesDisabled":false,"colorRules":[{"id":"8a64b028-2725-4154-bbd5-e6ba2ab800a2","ruleType":"colorByCondition","applyToColumn":null,"hideText":false,"applyTo":"cells","conditions":[{"operator":"<","column":null,"values":["50"]}],"chainingOperator":"and","visualType":"stat","colorStyle":"bold","color":"blue","tag":"Not bad","icon":"completed","ruleName":""},{"id":"5a537bb8-bc2b-420e-99d7-32dcb6ada409","ruleType":"colorByCondition","applyToColumn":null,"hideText":false,"applyTo":"cells","conditions":[{"operator":">","column":null,"values":["10"]}],"chainingOperator":"and","visualType":"stat","colorStyle":"bold","color":"blue","tag":"Not bad","icon":"completed","ruleName":""}],"colorStyle":"light"}},{"id":"5aa1a9a4-254c-43a2-b63c-bf3fe2a207a3","title":"Clicks","visualType":"card","pageId":"47b3b0b7-040b-42da-8aa5-8ff003ae2646","layout":{"x":12,"y":0,"width":3,"height":4},"queryRef":{"kind":"query","queryId":"5be9e18f-c13c-4a32-9c54-a37f5ff9020b"},"visualOptions":{"multiStat__textSize":"auto","multiStat__valueColumn":"clicks","colorRulesDisabled":false,"colorRules":[],"colorStyle":"light"}},{"id":"ba7030d8-7c4b-4dbc-8d5b-81e764512045","title":"Impressions","visualType":"card","pageId":"47b3b0b7-040b-42da-8aa5-8ff003ae2646","layout":{"x":7,"y":0,"width":5,"height":4},"queryRef":{"kind":"query","queryId":"556b29d2-1c93-4b27-b62a-ee6870a8287f"},"visualOptions":{"multiStat__textSize":"auto","multiStat__valueColumn":"impressions","colorRulesDisabled":false,"colorRules":[{"id":"ad746720-f3be-4162-83e2-7a2eb94b68c1","ruleType":"colorByCondition","applyToColumn":null,"hideText":false,"applyTo":"cells","conditions":[{"operator":">","column":"impressions","values":["1000"]}],"chainingOperator":"and","visualType":"stat","colorStyle":"bold","color":"green","tag":"","icon":"heart","ruleName":""}],"colorStyle":"light"}},{"id":"6dfcf085-33eb-4e19-93f5-6638d8379f37","title":"Average Page Load time","visualType":"timechart","pageId":"47b3b0b7-040b-42da-8aa5-8ff003ae2646","layout":{"x":8,"y":4,"width":7,"height":6},"queryRef":{"kind":"query","queryId":"d85a0eab-608e-4ed7-a666-d721e4aa991c"},"visualOptions":{"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":false,"legendLocation":"bottom","xColumnTitle":"","xColumn":null,"yColumns":null,"seriesColumns":null,"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"4249c89e-eb48-4514-8b22-ec6638e5b346","title":"Logo","visualType":"markdownCard","pageId":"47b3b0b7-040b-42da-8aa5-8ff003ae2646","layout":{"x":0,"y":0,"width":2,"height":4},"markdownText":"![AdventureWorks](https://vikasrajput.github.io/resources/PBIRptDev/AdventureWorksLogo.jpg \"AdventureWorks\")\n","visualOptions":{}},{"id":"67e05fea-5b90-45dc-8f60-6348fcab143d","title":"Page Load Time Anomalies","visualType":"anomalychart","pageId":"47b3b0b7-040b-42da-8aa5-8ff003ae2646","layout":{"x":8,"y":10,"width":7,"height":6},"queryRef":{"kind":"query","queryId":"1769eedf-c621-4c25-9e87-763e9fc66028"},"visualOptions":{"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":false,"legendLocation":"bottom","xColumnTitle":"","xColumn":null,"yColumns":null,"seriesColumns":null,"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"a2a79c8d-d849-476e-9a89-2eac9ea6bfcf","title":"Strong Anomalies","visualType":"table","pageId":"47b3b0b7-040b-42da-8aa5-8ff003ae2646","layout":{"x":15,"y":10,"width":9,"height":8},"queryRef":{"kind":"query","queryId":"055207f9-9ed4-416d-a59e-a199025eb352"},"visualOptions":{"table__enableRenderLinks":true,"colorRules":[],"colorRulesDisabled":true,"colorStyle":"light","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[],"table__renderLinks":[]}}],"baseQueries":[],"parameters":[{"kind":"duration","id":"86002c93-116e-4495-827f-5b93f79d9f29","displayName":"Time range","description":"","beginVariableName":"_startTime","endVariableName":"_endTime","defaultValue":{"kind":"dynamic","count":7,"unit":"days"},"showOnPages":{"kind":"all"}}],"dataSources":[{"kind":"kusto-trident","scopeId":"kusto-trident","clusterUri":"https://trd-kew0y9xrs7f1k68ydb.z1.kusto.fabric.microsoft.com","database":"656be381-3563-4718-a438-57752333bb35","name":"RTAdemo","id":"b4a38904-6f63-411f-ab0d-89ba508d801d","workspace":"b85947b3-684d-45e0-aab3-9c39bce411d9"}],"pages":[{"name":"Page 1","id":"47b3b0b7-040b-42da-8aa5-8ff003ae2646"}],"queries":[{"dataSource":{"kind":"inline","dataSourceId":"b4a38904-6f63-411f-ab0d-89ba508d801d"},"text":"events\n| where eventDate between (_startTime.._endTime) and eventType == \"CLICK\" \n| summarize date_count = count() by bin(eventDate, 1h) \n| render timechart  \n| top 30 by date_count ","id":"0a41b04e-fa32-4e49-8d2c-0fa0a5bfd09e","usedVariables":["_endTime","_startTime"]},{"dataSource":{"kind":"inline","dataSourceId":"b4a38904-6f63-411f-ab0d-89ba508d801d"},"text":"//Impressions by hour\nevents\n| where eventDate between (_startTime.._endTime) and eventType == \"IMPRESSION\" \n| summarize date_count = count() by bin(eventDate, 1h) \n| render timechart  \n| top 30 by date_count \n","id":"963d59cf-662f-484f-a000-41f690458c9c","usedVariables":["_endTime","_startTime"]},{"dataSource":{"kind":"inline","dataSourceId":"b4a38904-6f63-411f-ab0d-89ba508d801d"},"text":"//show map of impressions location\nevents \n| where eventDate  between (_startTime.._endTime) and eventType == \"IMPRESSION\" \n| join external_table('products') on $left.productId == $right.ProductID \n| project lon = toreal(geo_info_from_ip_address(ip_address).longitude), lat = toreal(geo_info_from_ip_address(ip_address).latitude), Name \n| render scatterchart with (kind = map)//, xcolumn=lon, ycolumns=lat)\n","id":"f50f71e7-f573-4fa5-b1be-2a164e2fd51e","usedVariables":["_endTime","_startTime"]},{"dataSource":{"kind":"inline","dataSourceId":"b4a38904-6f63-411f-ab0d-89ba508d801d"},"text":"let imp = events \n| where eventDate  between (_startTime.._endTime) and eventType == \"IMPRESSION\" \n| extend dateOnly = substring(todatetime(eventDate).tostring(), 0, 10) \n| summarize imp_count = count() by dateOnly; \nlet clck = events \n| where eventDate  between (_startTime.._endTime) and eventType == \"CLICK\" \n| extend dateOnly = substring(todatetime(eventDate).tostring(), 0, 10) \n| summarize clck_count = count() by dateOnly;\nimp  \n| join clck on $left.dateOnly == $right.dateOnly \n| project selected_date = dateOnly , \nimpressions = imp_count , \nclicks = clck_count,\nCTR = strcat(tostring(clck_count * 100 / imp_count),' %')\n","id":"bb34b622-7bc0-44a6-bf95-8e3dc671c98e","usedVariables":["_endTime","_startTime"]},{"dataSource":{"kind":"inline","dataSourceId":"b4a38904-6f63-411f-ab0d-89ba508d801d"},"text":"let imp = events \n| where eventDate  between (_startTime.._endTime) and eventType == \"IMPRESSION\" \n| extend dateOnly = substring(todatetime(eventDate).tostring(), 0, 10) \n| summarize imp_count = count() by dateOnly; \nlet clck = events \n| where eventDate  between (_startTime.._endTime) and eventType == \"CLICK\" \n| extend dateOnly = substring(todatetime(eventDate).tostring(), 0, 10) \n| summarize clck_count = count() by dateOnly;\nimp  \n| join clck on $left.dateOnly == $right.dateOnly \n| project selected_date = dateOnly , \nimpressions = imp_count , \nclicks = clck_count,\nCTR = clck_count * 100 / imp_count\n","id":"5be9e18f-c13c-4a32-9c54-a37f5ff9020b","usedVariables":["_endTime","_startTime"]},{"dataSource":{"kind":"inline","dataSourceId":"b4a38904-6f63-411f-ab0d-89ba508d801d"},"text":"let imp = events \n| where eventDate  between (_startTime.._endTime) and eventType == \"IMPRESSION\" \n| extend dateOnly = substring(todatetime(eventDate).tostring(), 0, 10) \n| summarize imp_count = count() by dateOnly; \nlet clck = events \n| where eventDate  between (_startTime.._endTime) and eventType == \"CLICK\" \n| extend dateOnly = substring(todatetime(eventDate).tostring(), 0, 10) \n| summarize clck_count = count() by dateOnly;\nimp  \n| join clck on $left.dateOnly == $right.dateOnly \n| project selected_date = dateOnly , \nimpressions = imp_count , \nclicks = clck_count,\nCTR = clck_count * 100 / imp_count\n","id":"556b29d2-1c93-4b27-b62a-ee6870a8287f","usedVariables":["_endTime","_startTime"]},{"dataSource":{"kind":"inline","dataSourceId":"b4a38904-6f63-411f-ab0d-89ba508d801d"},"text":"//Average Page Load time\nevents\n| where eventDate   between (_startTime.._endTime) and eventType == \"IMPRESSION\" \n| make-series average_loadtime = avg(page_loading_seconds) on eventDate from _startTime to _endTime+4h step 1h\n| extend forecast = series_decompose_forecast(average_loadtime, 4)\n| render timechart\n","id":"d85a0eab-608e-4ed7-a666-d721e4aa991c","usedVariables":["_endTime","_startTime"]},{"dataSource":{"kind":"inline","dataSourceId":"b4a38904-6f63-411f-ab0d-89ba508d801d"},"text":"//Avg Page Load Time Anomalies\nevents\n| where eventDate   between (_startTime.._endTime) and eventType == \"IMPRESSION\" \n| make-series average_loadtime = avg(page_loading_seconds) on eventDate from _startTime to _endTime+4h step 1h\n| extend anomalies = series_decompose_anomalies(average_loadtime)\n| render anomalychart \n","id":"1769eedf-c621-4c25-9e87-763e9fc66028","usedVariables":["_endTime","_startTime"]},{"dataSource":{"kind":"inline","dataSourceId":"b4a38904-6f63-411f-ab0d-89ba508d801d"},"text":"//Avg Page Load Time Anomalies\nevents\n| where eventDate between (_startTime.._endTime) and eventType == \"IMPRESSION\" \n| make-series average_loadtime = avg(page_loading_seconds) on eventDate from _startTime to _endTime+4h step 1h\n| extend anomalies = series_decompose_anomalies(average_loadtime,2.5)\n| mv-expand eventDate, average_loadtime, anomalies\n| where anomalies <> 0\n| project-away anomalies\n","id":"055207f9-9ed4-416d-a59e-a199025eb352","usedVariables":["_endTime","_startTime"]}]}
